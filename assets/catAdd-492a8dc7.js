import{a as h,_ as y}from"./config-3a988531.js";import{i as m}from"./navbar-64ba0015.js";import"./aside-136a93d9.js";import{f as D}from"./index-a4e39586.js";const B=document.querySelectorAll("#catData");B.forEach(t=>{t.classList.add("onThisPage")});const f=document.querySelector("#navAside");f.classList.remove("d-none");D("#catBirthday",{enableTime:!1,dateFormat:"Y-m-d"});const I=JSON.parse(localStorage.getItem("userTokenAndData")),{accessToken:v,user:E}=I,p=document.getElementById("addCatFrom"),l=document.getElementById("cancelAdd"),A=document.getElementById("myCatFile"),o={};function F(t){h.post(`${y}/cats`,t,{headers:{authorization:`Bearer ${v}`}}).then(e=>{console.log(e),alert("新增貓咪資料成功"),window.location.href="./catData.html"}).catch(e=>{console.log(e),alert(`新增貓咪資料失敗 請重新登入後嘗試 /n錯誤提示：${e.response.data}`),window.location.href="./login.html"})}p.addEventListener("submit",t=>{t.preventDefault(),m();const e=document.getElementById("catName"),a=document.getElementById("catMale"),c=document.getElementById("catFemale"),n=document.getElementById("catOther"),d=document.getElementById("catBirthday"),r=document.getElementById("catBreeds"),i=document.getElementById("catColors"),u=document.getElementById("catWeight");let g=()=>a.checked?a.value:c.checked?c.value:n.checked?n.value:"Not Specified";console.dir(a);let s={catName:e.value,catBreeds:r.value,colors:i.value,gender:g(),birthday:d.value,weight:u.value,catPhoto:o.base64Image||"https://i.imgur.com/slCGtuf.png",userId:E.id};console.log(s),F(s)});l.addEventListener("click",t=>{t.preventDefault();const e=l.getAttribute("href");m(e)});A.addEventListener("change",t=>{const e=t.target.files[0],a=new FileReader;a.onload=c=>{const n=c.target.result;o.base64Image=n,o.fileName=e.name;const d=document.getElementById("catPhoto");d.src=o.base64Image},a.readAsDataURL(e),console.log(o)});
