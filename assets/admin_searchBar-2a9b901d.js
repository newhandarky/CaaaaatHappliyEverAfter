import{a as f,_ as g}from"./config-82256151.js";import{S as s}from"./sweetalert2.all-bdf3eb51.js";import{h as p}from"./admin_config-2cf1d757.js";import{h as r}from"./moment-fbc5633a.js";const t=document.querySelector(".inputBookingNumber"),k=document.querySelector(".inputStartDate"),D=document.querySelector(".inputEndDate"),b=document.querySelector(".btnBookingNum"),h=document.querySelector(".btnDate");function S(){s.fire({title:"日期格式錯誤?",text:"起始日期不可與結束日期相等, 或在其之後",icon:"error"})}function u(){isNaN(Number(t.value))||Number(t.value)===0?(s.fire({title:"輸入格式錯誤",text:"請正確填寫訂單編號或輸入日期",icon:"error"}),localStorage.removeItem("bookingNum"),t.value=""):t.value!==""&&(localStorage.setItem("bookingNum",t.value),location="../pages/admin_updateBooking.html")}const y=f.get(`${g}/660/bookings?_expand=user&_expand=room`,p);h.addEventListener("click",function(){let e=r(k.value),l=r(D.value),n=l.diff(e,"days");n<=0&&S(),console.log(n),Promise.all([y]).then(function(o){const m=o[0].data;let a=[];for(let i=0;i<=n;i++){const d=r(e).add(i,"day").format("YYYY-MM-DD");m.forEach(function(c){c.checkIn===d&&a.push(c)})}a.length!==0?(localStorage.setItem("h2Content",`住房日期 <span class="text-primary">${e.format("YYYY-MM-DD")}</span> 到 <span class="text-primary">${l.format("YYYY-MM-DD")}</span> 的搜尋結果`),localStorage.setItem("searchResult",JSON.stringify(a)),location="../pages/admin_bookingSearch.html"):s.fire({title:"所查詢的日期無住房資料",text:"請確認輸入的日期是否正確",icon:"question"})}).catch(function(o){console.log(o),reLogin(o.response.data)})});b.addEventListener("click",function(){u()});t.addEventListener("keydown",function(e){e.keyCode===13&&u()});
