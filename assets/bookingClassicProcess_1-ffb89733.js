import{a as d,_ as f}from"./config-82256151.js";import{i as D}from"./navbar-5c89ec87.js";import{f as v}from"./index-a4e39586.js";import{S as s}from"./sweetalert2.all-bdf3eb51.js";import"./aside-096a2e7a.js";console.log("suc");let l=document.querySelector("#checkinDate"),a=document.querySelector("#checkoutDate"),u=document.querySelector(".toProcess_2"),g=document.querySelector("#dateForm");console.log(u);let i=new Date,h=i.getFullYear();console.log(h);console.log(i.getDate());console.log(i.getMonth()+1);let m=`${h}-${i.getMonth()+1}-${i.getDate()}`;console.log(m);d.get(`${f}/roomStates`).then(function(r){let e=r.data,t=[];e.forEach(function(c){let o={};o.start=c.date,o.title="",c.availableCount.classic?o.title=`剩餘${c.availableCount.classic}間`:o.title="已無空房",t.push(o)}),console.log(t);function n(){var c=document.getElementById("calendar"),o=new FullCalendar.Calendar(c,{initialView:"dayGridMonth",locale:"zh-tw",events:t});o.render(),console.log("success")}n()});l.addEventListener("change",function(r){d.get(`${f}/roomStates?date=${l.value}`).then(function(e){if(e.data[0].availableCount.classic==0)return s.fire(`${l.value}已無空房，請重新選擇`),g.reset()})});a.addEventListener("change",function(r){if(l.value>=a.value)return console.log(a.value),a.value="",s.fire("退房日期需晚於入住日期");d.get(`${f}/roomStates?date_gte=${l.value}&date_lte=${a.value}&date_ne=${a.value}`).then(function(e){let t=e.data;console.log(t),t.forEach(function(n){if(n.availableCount.classic==0)return s.fire(`${n.date}已無空房，請重新選擇`),g.reset()})})});u.addEventListener("click",function(r){if(r.preventDefault(),a.value==""||l.value=="")return s.fire("您尚未選擇入住或退房時間"),g.reset();{let e={};e.checkIn=l.value,e.checkOut=a.value,e.bookingDate=new Date,e.roomType="經典房",console.log(e);let t=JSON.stringify(e);sessionStorage.setItem("bookingData",t);const n=u.getAttribute("href");D(n),window.location.href="./bookingProcess_2.html"}});v("#checkinDate",{enableTime:!1,dateFormat:"Y-m-d",minDate:m,maxDate:"2024-02-29"});v("#checkoutDate",{enableTime:!1,dateFormat:"Y-m-d",minDate:m,maxDate:"2024-02-29"});
