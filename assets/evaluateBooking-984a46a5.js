import{a as s,_ as i}from"./config-3a988531.js";import{i as q}from"./navbar-64ba0015.js";import"./aside-136a93d9.js";import{S as r}from"./sweetalert2.all-0b6d9928.js";const L=document.querySelectorAll("#bookingHistory");L.forEach(e=>{e.classList.add("onThisPage")});const D=document.querySelector("#navAside");D.classList.remove("d-none");let c=0;document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".star");e.forEach(function(n){n.addEventListener("mouseover",function(){const o=this.getAttribute("data-rating");for(let t=1;t<=5;t++)document.querySelector(`.star[data-rating="${t}"]`).classList.toggle("active",t<=o)}),n.addEventListener("mouseout",function(){e.forEach(function(o){o.classList.remove("active")})}),n.addEventListener("click",function(){const o=this.getAttribute("data-rating");for(let t=1;t<=5;t++)document.querySelector(`.star[data-rating="${t}"]`).classList.toggle("pressed",t<=o);c=parseInt(o,10),console.log("getStars:",c)})})});const I=JSON.parse(localStorage.getItem("userTokenAndData")),{accessToken:u,user:b}=I,l=JSON.parse(localStorage.getItem("evaluateBooking_Id"));s.get(`${i}/600/bookings/${l}?_expand=room`,{headers:{authorization:`Bearer ${u}`}}).then(e=>{const n=e.data;console.log(n);const{checkIn:o,checkOut:t,room:a,quantity:C,cats:d,price:m,id:g}=n,{name:h}=a,f=d.length,k=document.querySelector("#checkIn"),y=document.querySelector("#checkOut"),S=document.querySelector("#roomType"),v=document.querySelector("#catsQuantity"),p=document.querySelector("#price"),$=document.querySelector("#bookingId");k.textContent=`入住時間：${o}`,y.textContent=`退房時間：${t}`,S.textContent=`入住房型：${h}`,v.textContent=`貓咪數量：${f}隻貓`,p.textContent=`總金額：${m} NT`,$.textContent=`訂房編號：${g}`}).catch(e=>{console.log(e),console.log("獲取資料失敗")});const x=document.querySelector("#evaluateBtn");x.addEventListener("click",e=>{e.preventDefault();let n=document.querySelector("#comment").value;c===0?r.fire("請輸入星星數量在發送評論！"):s.patch(`${i}/600/bookings/${l}?userId=${b.id}`,{feedback:{stars:c,comment:n}},{headers:{authorization:`Bearer ${u}`}}).then(o=>{console.log(o),r.fire({title:"評論送出成功",confirmButtonText:"確定"}).then(t=>{t.isConfirmed&&q("./bookingHistory.html")})})});
