import"./bootstrap.min-47e23b13.js";import"./admin_header-568a311b.js";import"./admin_searchBar-d09ed04a.js";import{a as f,_ as b}from"./config-4096d6dc.js";import{S as s}from"./sweetalert2.all-9c5228de.js";import{h}from"./moment-fbc5633a.js";import{h as p}from"./admin_config-2cf1d757.js";import"./transform-4d2927c0.js";import{c as n}from"./c3-f3e5f955.js";const u=document.querySelector(".bookingMonth"),d=document.querySelector(".before"),M=document.querySelector(".after");let m=`${localStorage.getItem("thisMonth")}`;u.textContent=m;f.get(`${b}/660/roomStates`,p).then(function(o){const g=o.data;let e=[],a=0,r=0,l=0;if(g.forEach(function(t){t.date.startsWith(m)&&(e.push(t),a+=t.availableCount.classic,r+=t.availableCount.delicate,l+=t.availableCount.luxury)}),e.length===0){s.fire({icon:"error",title:"尚未有房況資料",text:"請前往檢視房況表功能頁面進行新增",footer:'<a href="admin_bookingRoomTable.html">點我前往</a>'});return}else{let t=e.length*5-a,i=e.length*5-r,c=e.length*5-l;n.generate({bindto:"#chart1",data:{columns:[["經典房",t],["空房",a]],type:"donut"},donut:{title:"經典房"}}),n.generate({bindto:"#chart2",data:{columns:[["精緻房",i],["空房",r]],type:"donut"},donut:{title:"精緻房"}}),n.generate({bindto:"#chart3",data:{columns:[["豪華房",c],["空房",l]],type:"donut"},donut:{title:"豪華房"}}),n.generate({bindto:"#chart4",data:{columns:[["經典房",t],["精緻房",i],["豪華房",c],["總空房",e.length*15-(t+i+c)]],type:"donut"},donut:{title:"總住房比例"}})}}).catch(function(o){console.log(o)});M.addEventListener("click",function(){let o=h(localStorage.getItem("thisMonth")).add(1,"month").format("YYYY-MM");localStorage.setItem("thisMonth",o),location.reload()});d.addEventListener("click",function(){let o=h(localStorage.getItem("thisMonth")).add(-1,"month").format("YYYY-MM");if(o==="2023-08"){s.fire({title:"抱歉並無2023-09以前的資料",icon:"error"}),d.setAttribute("disabled",!0);return}localStorage.setItem("thisMonth",o),u.textContent=localStorage.getItem("thisMonth"),location.reload()});
