import"./bootstrap.min-47e23b13.js";import{i as D}from"./navbar-a947fc30.js";import{a as i,_ as s}from"./config-4096d6dc.js";import{f as g}from"./index-a4e39586.js";import"./sweetalert2.all-9c5228de.js";import"./aside-c7b7c768.js";console.log("suc");let t=document.querySelector("#checkinDate"),e=document.querySelector("#checkoutDate"),m=document.querySelector(".toProcess_2");document.querySelector("#dateForm");console.log(m);let r=new Date,f=r.getFullYear();console.log(f);console.log(r.getDate());console.log(r.getMonth()+1);let v=`${f}-${r.getMonth()+1}-${r.getDate()}`;console.log(v);i.get(`${s}/roomStates`).then(function(u){let c=u.data,o=[];c.forEach(function(l){let a={};a.start=l.date,a.title="",l.availableCount.classic>0?a.title=`剩餘${l.availableCount.classic}間`:a.title="已無空房",o.push(a)}),console.log(o);function n(){var l=document.getElementById("calendar"),a=new FullCalendar.Calendar(l,{initialView:"dayGridMonth",locale:"zh-tw",events:o});a.render(),console.log("success")}n()});t.addEventListener("change",function(u){i.get(`${s}/roomStates?date=${t.value}`).then(function(c){if(c.data[0].availableCount.classic<=0){alert(`${t.value}已無空房，請重新選擇`),t.value="",e.value="";return}})});e.addEventListener("change",function(u){if(t.value=="")return e.value="",alert("請先選擇入住日期");if(t.value>=e.value)return console.log(e.value),e.value="",t.value="",alert("退房日期需晚於入住日期");i.get(`${s}/roomStates?date_gte=${t.value}&date_lte=${e.value}&date_ne=${e.value}`).then(function(c){let o=c.data;console.log(o);let n="";o.forEach(function(l){l.availableCount.classic<=0&&(n+=`${l.date} `)}),console.log(n),alert(`${n}已無空房，請重新選擇`),e.value="",t.value=""})});m.addEventListener("click",function(u){if(u.preventDefault(),e.value==""||t.value==""){alert("您尚未選擇入住或退房時間"),e.value=="",t.value=="";return}if(t.value>=e.value)return console.log(e.value),e.value=="",t.value=="",alert("退房日期需晚於入住日期");i.get(`${s}/roomStates?date_gte=${t.value}&date_lte=${e.value}&date_ne=${e.value}`).then(function(c){let o=c.data;console.log(o);let n="";o.forEach(function(l){if(l.availableCount.classic<=0&&(n+=`${l.date} `),n!==""){alert(`${n}已無空房，請重新選擇`),e.value="",t.value="";return}let a={};a.checkIn=t.value,a.checkOut=e.value,a.bookingDate=new Date,a.roomType="經典房",console.log(a);let h=JSON.stringify(a);sessionStorage.setItem("bookingData",h),D("./bookingProcess_2.html")})})});g("#checkinDate",{enableTime:!1,dateFormat:"Y-m-d",minDate:v,maxDate:"2024-02-29"});g("#checkoutDate",{enableTime:!1,dateFormat:"Y-m-d",minDate:v,maxDate:"2024-02-29"});console.log(sessionStorage.getItem("indexBooking"));let d=JSON.parse(sessionStorage.getItem("indexBooking"));console.log(d);t.value=d[0].checkIn;e.value=d[0].checkOut;console.log(t.value);console.log(e.value);t.setAttribute("value",t.value);e.setAttribute("value",t.value);
