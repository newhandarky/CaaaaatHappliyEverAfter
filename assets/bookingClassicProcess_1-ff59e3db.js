import{a as d,_ as g}from"./config-b31ac0c6.js";import{i as D}from"./navbar-da03776d.js";import{f as h}from"./index-a4e39586.js";import{S as i}from"./sweetalert2.all-b0ac47b5.js";import"./aside-2c6a0e4f.js";console.log("suc");let t=document.querySelector("#checkinDate"),a=document.querySelector("#checkoutDate"),u=document.querySelector(".toProcess_2"),f=document.querySelector("#dateForm");console.log(u);let s=new Date,k=s.getFullYear();console.log(k);console.log(s.getDate());console.log(s.getMonth()+1);let m=`${k}-${s.getMonth()+1}-${s.getDate()}`;console.log(m);d.get(`${g}/roomStates`).then(function(c){let e=c.data,o=[];e.forEach(function(r){let l={};l.start=r.date,l.title="",r.availableCount.classic?l.title=`剩餘${r.availableCount.classic}間`:l.title="已無空房",o.push(l)}),console.log(o);function n(){var r=document.getElementById("calendar"),l=new FullCalendar.Calendar(r,{initialView:"dayGridMonth",locale:"zh-tw",events:o});l.render(),console.log("success")}n()});t.addEventListener("change",function(c){d.get(`${g}/roomStates?date=${t.value}`).then(function(e){if(e.data[0].availableCount.classic==0)return i.fire(`${t.value}已無空房，請重新選擇`),f.reset()})});a.addEventListener("change",function(c){if(t.value>=a.value)return console.log(a.value),a.value="",i.fire("退房日期需晚於入住日期");d.get(`${g}/roomStates?date_gte=${t.value}&date_lte=${a.value}&date_ne=${a.value}`).then(function(e){let o=e.data;console.log(o),o.forEach(function(n){if(n.availableCount.classic<=0)return i.fire(`${n.date}已無空房，請重新選擇`),f.reset()})})});u.addEventListener("click",function(c){if(c.preventDefault(),a.value==""||t.value=="")return i.fire("您尚未選擇入住或退房時間"),f.reset();{let e={};e.checkIn=t.value,e.checkOut=a.value,e.bookingDate=new Date,e.roomType="經典房",console.log(e);let o=JSON.stringify(e);sessionStorage.setItem("bookingData",o);const n=u.getAttribute("href");D(n),window.location.href="./bookingProcess_2.html"}});h("#checkinDate",{enableTime:!1,dateFormat:"Y-m-d",minDate:m,maxDate:"2024-02-29"});h("#checkoutDate",{enableTime:!1,dateFormat:"Y-m-d",minDate:m,maxDate:"2024-02-29"});console.log(sessionStorage.getItem("indexBooking"));let v=JSON.parse(sessionStorage.getItem("indexBooking"));console.log(v);t.value=v[0].checkIn;a.value=v[0].checkOut;console.log(t.value);console.log(a.value);t.setAttribute("value",t.value);a.setAttribute("value",t.value);
