import{S as g}from"./sweetalert2.all-1988d671.js";import{i as f}from"./navbar-bd5379fb.js";import"./aside-7286c9e4.js";import{a as y,_ as B}from"./config-4096d6dc.js";import{f as k}from"./index-a4e39586.js";const w=document.querySelectorAll("#memberData");w.forEach(e=>{e.classList.add("onThisPage")});const L=document.querySelector("#navAside");L.classList.remove("d-none");k("#birthday",{enableTime:!1,dateFormat:"Y-m-d"});const A=JSON.parse(localStorage.getItem("userTokenAndData")),{accessToken:b,user:D}=A,F=document.getElementById("editMemberFrom"),h=document.getElementById("cancelEdit"),T=document.getElementById("myFile"),c={};function x(){const e=D.id;y.get(`${B}/600/users/${e}`,{headers:{authorization:`Bearer ${b}`}}).then(t=>{const{name:o,gender:n,birthday:a,address:s,phone:l,email:u,userPhoto:d}=t.data,r=document.getElementById("name"),i=document.getElementById("male"),m=document.getElementById("female"),E=document.getElementById("other"),p=document.getElementById("birthday"),I=document.getElementById("phone"),v=document.getElementById("address"),S=document.getElementById("photo");r.value=o,function(){n==="male"?i.checked=!0:n==="female"?m.checked=!0:n==="other"&&(E.checked=!0)}(),p.value=a,I.value=l,v.value=s,S.setAttribute("src",d),document.querySelector("#loading").classList.toggle("d-none")}).catch(t=>{console.log(t)})}x();function $(e){const t=D.id;y.patch(`${B}/600/users/${t}`,e,{headers:{authorization:`Bearer ${b}`}}).then(o=>{console.log(o),g.mixin({customClass:{confirmButton:"btn btn-custom-confirm",cancelButton:"btn btn-custom-cancel"},buttonsStyling:!1}).fire({title:"修改會員成功",icon:"success",confirmButtonText:"確定"}).then(a=>{window.location.href="./member.html"})}).catch(o=>{console.log(o),g.mixin({customClass:{confirmButton:"btn btn-custom-confirm",cancelButton:"btn btn-custom-cancel"},buttonsStyling:!1}).fire({title:"修改會員失敗",text:"請重新登入後再嘗試",confirmButtonText:"確定"}).then(a=>{window.location.href="./login.html"})})}F.addEventListener("submit",e=>{e.preventDefault(),f(),document.querySelector("#editMember").classList.toggle("d-none"),document.querySelector("#loading").classList.toggle("d-none");const n=document.getElementById("name"),a=document.getElementById("male"),s=document.getElementById("female"),l=document.getElementById("other"),u=document.getElementById("birthday"),d=document.getElementById("phone"),r=document.getElementById("address");let i=()=>a.checked?male.value:s.checked?female.value:l.checked?other.value:"Not Specified",m={name:n.value,gender:i(),birthday:u.value,phone:d.value,address:r.value,userPhoto:c.base64Image};console.log(m),$(m)});h.addEventListener("click",e=>{e.preventDefault();const t=h.getAttribute("href");f(t)});T.addEventListener("change",e=>{const t=e.target.files[0],o=new FileReader;o.onload=n=>{const a=n.target.result;c.base64Image=a,c.fileName=t.name;const s=document.getElementById("photo");s.src=c.base64Image},o.readAsDataURL(t),console.log(c)});
