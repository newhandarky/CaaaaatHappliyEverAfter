import{a as d,_ as f}from"./config-82256151.js";import{i as D}from"./navbar-5c89ec87.js";import{f as v}from"./index-a4e39586.js";import{S as u}from"./sweetalert2.all-bdf3eb51.js";import"./aside-096a2e7a.js";let l=document.querySelector("#checkinDate"),o=document.querySelector("#checkoutDate"),s=document.querySelector(".toProcess_2"),g=document.querySelector("#dateForm");console.log(s);let i=new Date,h=i.getFullYear();console.log(h);console.log(i.getDate());console.log(i.getMonth()+1);let m=`${h}-${i.getMonth()+1}-${i.getDate()}`;console.log(m);d.get(`${f}/roomStates`).then(function(r){let e=r.data,t=[];e.forEach(function(c){let a={};a.start=c.date,a.title="",c.availableCount.delicate>0?a.title=`剩餘${c.availableCount.delicate}間`:a.title="已無空房",t.push(a)}),console.log(t);function n(){var c=document.getElementById("calendar"),a=new FullCalendar.Calendar(c,{initialView:"dayGridMonth",locale:"zh-tw",events:t});a.render(),console.log("success")}n()});l.addEventListener("change",function(r){d.get(`${f}/roomStates?date=${l.value}`).then(function(e){let t=e.data;if(console.log(t[0].availableCount.delicate),t[0].availableCount.delicate==0)return console.log(t[0].availableCount.delicate),u.fire(`${l.value}已無空房，請重新選擇`),g.reset()})});o.addEventListener("change",function(r){if(l.value>=o.value)return o.value="",u.fire("退房日期需晚於入住日期");d.get(`${f}/roomStates?date_gte=${l.value}&date_lte=${o.value}&date_ne=${o.value}`).then(function(e){let t=e.data;console.log(t),t.forEach(function(n){if(n.availableCount.delicate==0)return u.fire(`${n.date}已無空房，請重新選擇`),g.reset()})})});s.addEventListener("click",function(r){if(r.preventDefault(),o.value==""||l.value=="")return u.fire("您尚未選擇入住或退房時間"),g.reset();{let e={};e.checkIn=l.value,e.checkOut=o.value,e.bookingDate=new Date,e.roomType="精緻房",console.log(e);let t=JSON.stringify(e);sessionStorage.setItem("bookingData",t);const n=s.getAttribute("href");D(n),window.location.href="./bookingProcess_2.html"}});v("#checkinDate",{enableTime:!1,dateFormat:"Y-m-d",minDate:m,maxDate:"2024-02-29"});v("#checkoutDate",{enableTime:!1,dateFormat:"Y-m-d",minDate:m,maxDate:"2024-02-29"});
