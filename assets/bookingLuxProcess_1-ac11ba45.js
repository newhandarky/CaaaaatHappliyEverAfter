import{a as d,_ as g}from"./config-33b8f4bf.js";import{i as D}from"./navbar-9de94bda.js";import{f as h}from"./index-a4e39586.js";import{S as i}from"./sweetalert2.all-029eceb1.js";import"./aside-3a63331c.js";let a=document.querySelector("#checkinDate"),o=document.querySelector("#checkoutDate"),s=document.querySelector(".toProcess_2"),f=document.querySelector("#dateForm");console.log(s);let c=new Date,k=c.getFullYear();console.log(k);console.log(c.getDate());console.log(c.getMonth()+1);let m=`${k}-${c.getMonth()+1}-${c.getDate()}`;console.log(m);d.get(`${g}/roomStates`).then(function(r){let e=r.data,t=[];e.forEach(function(u){let l={};l.start=u.date,l.title="",u.availableCount.luxury>0?l.title=`剩餘${u.availableCount.luxury}間`:l.title="已無空房",t.push(l)}),console.log(t);function n(){var u=document.getElementById("calendar"),l=new FullCalendar.Calendar(u,{initialView:"dayGridMonth",locale:"zh-tw",events:t});l.render(),console.log("success")}n()});a.addEventListener("change",function(r){d.get(`${g}/roomStates?date=${a.value}`).then(function(e){let t=e.data;if(console.log(t[0].availableCount.luxury),t[0].availableCount.luxury==0)return console.log(t[0].availableCount.luxury),i.fire(`${a.value}已無空房，請重新選擇`),f.reset()})});o.addEventListener("change",function(r){if(a.value>=o.value)return o.value="",i.fire("退房日期需晚於入住日期");d.get(`${g}/roomStates?date_gte=${a.value}&date_lte=${o.value}&date_ne=${o.value}`).then(function(e){let t=e.data;console.log(t),t.forEach(function(n){if(n.availableCount.luxury==0)return i.fire(`${n.date}已無空房，請重新選擇`),f.reset()})})});s.addEventListener("click",function(r){if(r.preventDefault(),o.value==""||a.value=="")return i.fire("您尚未選擇入住或退房時間"),f.reset();{let e={};e.checkIn=a.value,e.checkOut=o.value,e.bookingDate=new Date,e.roomType="豪華房",console.log(e);let t=JSON.stringify(e);sessionStorage.setItem("bookingData",t);const n=s.getAttribute("href");D(n),window.location.href="./bookingProcess_2.html"}});h("#checkinDate",{enableTime:!1,dateFormat:"Y-m-d",minDate:m,maxDate:"2024-02-29"});h("#checkoutDate",{enableTime:!1,dateFormat:"Y-m-d",minDate:m,maxDate:"2024-02-29"});console.log(sessionStorage.getItem("indexBooking"));let v=JSON.parse(sessionStorage.getItem("indexBooking"));console.log(v);a.value=v[0].checkIn;o.value=v[0].checkOut;console.log(a.value);console.log(o.value);a.setAttribute("value",a.value);o.setAttribute("value",a.value);
