import{S as e,a as c,_ as l}from"./sweetalert2.all-203b6da2.js";import{h as p}from"./admin_header-cdcf5a9d.js";import{t as r}from"./tinymce-0684af05.js";import{h as s}from"./admin_config-2cf1d757.js";import{r as u}from"./loginIsTimeUp-b8b3d4c8.js";const m=document.querySelector(".articleTitle"),d=document.querySelector(".articleId"),f=document.querySelector(".articleKeyword"),w=document.querySelector(".articleAddNewForm"),C=document.querySelector(".cancelSaveArticleBtn");r.init({selector:"textarea#articleContent"});w.addEventListener("submit",function(t){t.preventDefault(),h();let n=r.get("articleContent").getContent(),o={title:m.value,content:n,keyword:f.value,lastEditOrPublishTime:localStorage.getItem("articleLastEditOrPublishTime"),status:"已發佈",id:parseInt(d.value)};e.fire({title:"是否要新增文章",icon:"warning",showCancelButton:!0,confirmButtonColor:"#20c997",cancelButtonColor:"#dc3545",confirmButtonText:'<span class="text-white fs-4 px-1">是</span>',cancelButtonText:'<span class="text-white fs-4 px-1">否</span>'}).then(i=>{i.isConfirmed&&c.post(`${l}/660/article`,o,s).then(function(){e.fire({title:"文章新增成功",icon:"success",showConfirmButton:!1}),setTimeout(()=>{window.location.href="./admin_article.html"},1e3)}).catch(function(a){u(a.response.data)})})});C.addEventListener("click",function(t){t.preventDefault(),h();let n=r.get("articleContent").getContent(),o={title:m.value,content:n,keyword:f.value,lastEditOrPublishTime:localStorage.getItem("articleLastEditOrPublishTime"),status:"草稿",id:parseInt(d.value)};e.fire({title:"是否要儲存為草稿",icon:"warning",showCancelButton:!0,confirmButtonColor:"#20c997",cancelButtonColor:"#dc3545",confirmButtonText:'<span class="text-white fs-4 px-1">是</span>',cancelButtonText:'<span class="text-white fs-4 px-1">否</span>'}).then(i=>{i.isConfirmed&&c.post(`${l}/660/article`,o,s).then(function(){e.fire({title:"已成功儲存為草稿",icon:"success",showConfirmButton:!1}),setTimeout(()=>{window.location.href="./admin_article.html"},1e3)}).catch(function(a){u(a.response.data)})})});function h(){let t=p().format("YYYY-MM-DD");localStorage.setItem("articleLastEditOrPublishTime",t)}
