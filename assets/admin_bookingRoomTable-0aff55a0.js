import"./bootstrap.min-47e23b13.js";import"./admin_header-568a311b.js";import"./admin_searchBar-d09ed04a.js";import{a as _,_ as p}from"./config-4096d6dc.js";import{S as a}from"./sweetalert2.all-9c5228de.js";import{h as r}from"./moment-fbc5633a.js";import{h as x}from"./admin_config-2cf1d757.js";import"./transform-4d2927c0.js";import{c as g}from"./c3-f3e5f955.js";const M=document.querySelector(".bookingMonth"),S=document.querySelector(".before"),U=document.querySelector(".after"),b=document.querySelector(".btnReload");let n=`${localStorage.getItem("thisMonth")}`;const d={classic:"經典房",delicate:"精緻房",luxury:"豪華房"};M.textContent=n;_.get(`${p}/660/roomStates`,x).then(function(e){let i=[],c=[],l=[],u=[],f=["x"];e.data.forEach(function(t){t.date.startsWith(n)&&i.push(t)}),i.length===0?a.fire({title:"尚未建立此月份的防況資料 是否建立?",showDenyButton:!0,confirmButtonText:"確定建立",denyButtonText:"取消返回"}).then(t=>{if(a.mixin({toast:!0,position:"center",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:s=>{s.onmouseenter=a.stopTimer,s.onmouseleave=a.resumeTimer}}).fire({icon:"info",title:"資料建立中"}),t.isConfirmed){let s=r(n).format("YYYY-MM-DD"),y=r(n).add(1,"month").format("YYYY-MM-DD"),Y=r(y).diff(s,"days"),h=[];for(let o=0;o<Y;o++){let m={date:r(n).add(o,"days").format("YYYY-MM-DD"),availableCount:{classic:5,delicate:5,luxury:5},status:{classic_A_canUse:!0,classic_B_canUse:!0,classic_C_canUse:!0,classic_D_canUse:!0,classic_E_canUse:!0,delicate_A_canUse:!0,delicate_B_canUse:!0,delicate_C_canUse:!0,delicate_D_canUse:!0,delicate_E_canUse:!0,luxury_A_canUse:!0,luxury_B_canUse:!0,luxury_C_canUse:!0,luxury_D_canUse:!0,luxury_E_canUse:!0}};h.push(_.post(`${p}/660/roomStates`,m,x))}Promise.all(h).then(function(o){a.fire({title:"資料建立成功",confirmButtonText:"Save"}).then(m=>{m.isConfirmed&&location.reload()})}).catch(function(o){console.log(o.response)})}else t.isDenied&&a.fire("資料尚未建立","","info")}):i.forEach(function(t){c.push(t.availableCount.classic),l.push(t.availableCount.delicate),u.push(t.availableCount.luxury),f.push(t.date)}),c.unshift(d.classic),l.unshift(d.delicate),u.unshift(d.luxury),g.generate({bindto:"#chart",data:{x:"x",columns:[f,c,l,u],types:{經典房:"area-step",精緻房:"area-step",豪華房:"area-step"}},axis:{x:{type:"timeseries",tick:{format:"%Y-%m-%d"}},y:{tick:{values:[0,1,2,3,4,5]}}}})}).catch(function(e){console.log(e)});S.addEventListener("click",function(){let e=r(localStorage.getItem("thisMonth")).add(-1,"month").format("YYYY-MM");localStorage.setItem("thisMonth",e),location.reload()});U.addEventListener("click",function(){let e=r(localStorage.getItem("thisMonth")).add(1,"month").format("YYYY-MM");localStorage.setItem("thisMonth",e),location.reload()});b.addEventListener("click",function(){location.reload()});
