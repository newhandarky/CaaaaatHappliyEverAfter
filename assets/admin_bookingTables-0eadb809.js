import{a as f,_ as b,S as d}from"./sweetalert2.all-203b6da2.js";import{h}from"./admin_header-cdcf5a9d.js";import"./admin_searchBar-1ab06dce.js";import{h as M}from"./admin_config-2cf1d757.js";import{r as S}from"./loginIsTimeUp-b8b3d4c8.js";import{c as n}from"./c3-590653ac.js";const u=document.querySelector(".bookingMonth"),s=document.querySelector(".before"),p=document.querySelector(".after");let m=`${localStorage.getItem("thisMonth")}`;u.textContent=m;f.get(`${b}/660/roomStates`,M).then(function(e){const g=e.data;let o=[],a=0,r=0,l=0;if(g.forEach(function(t){t.date.startsWith(m)&&(o.push(t),a+=t.availableCount.classic,r+=t.availableCount.delicate,l+=t.availableCount.luxury)}),o.length===0){d.fire({icon:"error",title:"尚未有房況資料",text:"請前往檢視房況表功能頁面進行新增",footer:'<a href="admin_bookingRoomTable.html">點我前往</a>'});return}else{let t=o.length*5-a,i=o.length*5-r,c=o.length*5-l;n.generate({bindto:"#chart1",data:{columns:[["經典房",t],["空房",a]],type:"donut"},donut:{title:"經典房"}}),n.generate({bindto:"#chart2",data:{columns:[["精緻房",i],["空房",r]],type:"donut"},donut:{title:"精緻房"}}),n.generate({bindto:"#chart3",data:{columns:[["豪華房",c],["空房",l]],type:"donut"},donut:{title:"豪華房"}}),n.generate({bindto:"#chart4",data:{columns:[["經典房",t],["精緻房",i],["豪華房",c],["總空房",o.length*15-(t+i+c)]],type:"donut"},donut:{title:"總住房比例"}})}}).catch(function(e){S(e.response.data)});p.addEventListener("click",function(){let e=h(localStorage.getItem("thisMonth")).add(1,"month").format("YYYY-MM");localStorage.setItem("thisMonth",e),location.reload()});s.addEventListener("click",function(){let e=h(localStorage.getItem("thisMonth")).add(-1,"month").format("YYYY-MM");if(e==="2023-08"){d.fire({title:"抱歉並無2023-09以前的資料",icon:"error"}),s.setAttribute("disabled",!0);return}localStorage.setItem("thisMonth",e),u.textContent=localStorage.getItem("thisMonth"),location.reload()});
