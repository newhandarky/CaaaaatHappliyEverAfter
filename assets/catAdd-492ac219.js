import{a as h,_ as D}from"./config-82256151.js";import{i as m}from"./navbar-5c89ec87.js";import"./aside-096a2e7a.js";import{f as y}from"./index-a4e39586.js";const B=document.querySelectorAll("#catData");B.forEach(t=>{t.classList.add("onThisPage")});y("#catBirthday",{enableTime:!1,dateFormat:"Y-m-d"});const f=JSON.parse(localStorage.getItem("userTokenAndData")),{accessToken:I,user:E}=f,p=document.getElementById("addCatFrom"),s=document.getElementById("cancelAdd"),v=document.getElementById("myCatFile"),o={};function A(t){h.post(`${D}/cats`,t,{headers:{authorization:`Bearer ${I}`}}).then(e=>{console.log(e),alert("新增貓咪資料成功"),window.location.href="./catData.html"}).catch(e=>{console.log(e),alert(`新增貓咪資料失敗 請重新登入後嘗試 /n錯誤提示：${e.response.data}`),window.location.href="./login.html"})}p.addEventListener("submit",t=>{t.preventDefault(),m();const e=document.getElementById("catName"),a=document.getElementById("catMale"),c=document.getElementById("catFemale"),n=document.getElementById("catOther"),d=document.getElementById("catBirthday"),r=document.getElementById("catBreeds"),i=document.getElementById("catColors"),g=document.getElementById("catWeight");let u=()=>a.checked?a.value:c.checked?c.value:n.checked?n.value:"Not Specified";console.dir(a);let l={catName:e.value,catBreeds:r.value,colors:i.value,gender:u(),birthday:d.value,weight:g.value,catPhoto:o.base64Image||"https://i.imgur.com/slCGtuf.png",userId:E.id};console.log(l),A(l)});s.addEventListener("click",t=>{t.preventDefault();const e=s.getAttribute("href");m(e)});v.addEventListener("change",t=>{const e=t.target.files[0],a=new FileReader;a.onload=c=>{const n=c.target.result;o.base64Image=n,o.fileName=e.name;const d=document.getElementById("catPhoto");d.src=o.base64Image},a.readAsDataURL(e),console.log(o)});
