import{a as u,_ as h}from"./config-33b8f4bf.js";import{i as g}from"./navbar-9de94bda.js";import"./aside-3a63331c.js";import{f as k}from"./index-a4e39586.js";const F=document.querySelectorAll("#memberData");F.forEach(t=>{t.classList.add("onThisPage")});k("#birthday",{enableTime:!1,dateFormat:"Y-m-d"});const L=JSON.parse(localStorage.getItem("userTokenAndData")),{accessToken:y,user:f}=L,$=document.getElementById("editMemberFrom"),i=document.getElementById("cancelEdit"),w=document.getElementById("myFile"),d={};function A(){const t=f.id;u.get(`${h}/600/users/${t}`,{headers:{authorization:`Bearer ${y}`}}).then(e=>{const{name:o,gender:n,birthday:a,address:m,phone:s,email:r,userPhoto:l}=e.data,c=document.getElementById("name"),D=document.getElementById("male"),E=document.getElementById("female"),I=document.getElementById("other"),b=document.getElementById("birthday"),p=document.getElementById("phone"),B=document.getElementById("address"),v=document.getElementById("photo");c.value=o,function(){n==="male"?D.checked=!0:n==="female"?E.checked=!0:n==="other"&&(I.checked=!0)}(),b.value=a,p.value=s,B.value=m,v.setAttribute("src",l)}).catch(e=>{console.log(e)})}A();function T(t){const e=f.id;u.patch(`${h}/600/users/${e}`,t,{headers:{authorization:`Bearer ${y}`}}).then(o=>{console.log(o),alert("修改會員資料成功"),window.location.href="./member.html"}).catch(o=>{console.log(o),alert(`修改會員資料失敗 請重新登入後嘗試 /n錯誤提示：${o.response.data}`),window.location.href="./login.html"})}$.addEventListener("submit",t=>{t.preventDefault(),g();const e=document.getElementById("name"),o=document.getElementById("male"),n=document.getElementById("female"),a=document.getElementById("other"),m=document.getElementById("birthday"),s=document.getElementById("phone"),r=document.getElementById("address");let l=()=>o.checked?male.value:n.checked?female.value:a.checked?other.value:"Not Specified",c={name:e.value,gender:l(),birthday:m.value,phone:s.value,address:r.value,userPhoto:d.base64Image};console.log(c),T(c)});i.addEventListener("click",t=>{t.preventDefault();const e=i.getAttribute("href");g(e)});w.addEventListener("change",t=>{const e=t.target.files[0],o=new FileReader;o.onload=n=>{const a=n.target.result;d.base64Image=a,d.fileName=e.name;const m=document.getElementById("photo");m.src=d.base64Image},o.readAsDataURL(e),console.log(d)});
