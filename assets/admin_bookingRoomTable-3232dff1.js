import{a as _,_ as p,S as a}from"./sweetalert2.all-203b6da2.js";import{h as r}from"./admin_header-cdcf5a9d.js";import"./admin_searchBar-1ab06dce.js";import{h as x}from"./admin_config-2cf1d757.js";import{r as y}from"./loginIsTimeUp-b8b3d4c8.js";import{c as M}from"./c3-590653ac.js";const S=document.querySelector(".bookingMonth"),U=document.querySelector(".before"),b=document.querySelector(".after"),D=document.querySelector(".btnReload");let n=`${localStorage.getItem("thisMonth")}`;const f={classic:"經典房",delicate:"精緻房",luxury:"豪華房"};S.textContent=n;_.get(`${p}/660/roomStates`,x).then(function(e){let i=[],c=[],l=[],u=[],m=["x"];e.data.forEach(function(t){t.date.startsWith(n)&&i.push(t)}),i.length===0?a.fire({title:"尚未建立此月份的房況資料 是否建立?",showDenyButton:!0,confirmButtonText:"確定建立",denyButtonText:"取消返回"}).then(t=>{if(a.mixin({toast:!0,position:"center",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,didOpen:s=>{s.onmouseenter=a.stopTimer,s.onmouseleave=a.resumeTimer}}).fire({icon:"info",title:"資料建立中"}),t.isConfirmed){let s=r(n).format("YYYY-MM-DD"),Y=r(n).add(1,"month").format("YYYY-MM-DD"),g=r(Y).diff(s,"days"),h=[];for(let o=0;o<g;o++){let d={date:r(n).add(o,"days").format("YYYY-MM-DD"),availableCount:{classic:5,delicate:5,luxury:5},status:{classic_A_canUse:!0,classic_B_canUse:!0,classic_C_canUse:!0,classic_D_canUse:!0,classic_E_canUse:!0,delicate_A_canUse:!0,delicate_B_canUse:!0,delicate_C_canUse:!0,delicate_D_canUse:!0,delicate_E_canUse:!0,luxury_A_canUse:!0,luxury_B_canUse:!0,luxury_C_canUse:!0,luxury_D_canUse:!0,luxury_E_canUse:!0}};h.push(_.post(`${p}/660/roomStates`,d,x))}Promise.all(h).then(function(o){a.fire({title:"資料建立成功",confirmButtonText:"OK"}).then(d=>{d.isConfirmed&&location.reload()})}).catch(function(o){y(o.response.data)})}else t.isDenied&&a.fire("資料尚未建立","","info")}):i.forEach(function(t){c.push(t.availableCount.classic),l.push(t.availableCount.delicate),u.push(t.availableCount.luxury),m.push(t.date)}),c.unshift(f.classic),l.unshift(f.delicate),u.unshift(f.luxury),M.generate({bindto:"#chart",data:{x:"x",columns:[m,c,l,u],types:{經典房:"area-step",精緻房:"area-step",豪華房:"area-step"}},axis:{x:{type:"timeseries",tick:{format:"%Y-%m-%d"}},y:{tick:{values:[0,1,2,3,4,5]}}}})}).catch(function(e){y(e.response.data)});U.addEventListener("click",function(){let e=r(localStorage.getItem("thisMonth")).add(-1,"month").format("YYYY-MM");localStorage.setItem("thisMonth",e),location.reload()});b.addEventListener("click",function(){let e=r(localStorage.getItem("thisMonth")).add(1,"month").format("YYYY-MM");localStorage.setItem("thisMonth",e),location.reload()});D.addEventListener("click",function(){location.reload()});
