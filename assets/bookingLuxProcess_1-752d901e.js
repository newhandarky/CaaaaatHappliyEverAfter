import{S as o}from"./sweetalert2.all-1988d671.js";import{i as g}from"./navbar-bd5379fb.js";import{a as c,_ as d}from"./config-4096d6dc.js";import{f as m}from"./index-a4e39586.js";import"./aside-7286c9e4.js";import"./bookingNavLink-c4975e73.js";let e=document.querySelector("#checkinDate"),t=document.querySelector("#checkoutDate"),$=document.querySelector(".toProcess_2");document.querySelector("#dateForm");let v=new Date,D=v.getFullYear(),f=`${D}-${v.getMonth()+1}-${v.getDate()}`;c.get(`${d}/roomStates`).then(function(i){let u=i.data,r=[];u.forEach(function(a){let n={};n.start=a.date,n.title="",a.availableCount.luxury>0?n.title=`剩餘${a.availableCount.luxury}間`:n.title="已無空房",r.push(n)});function l(){var a=document.getElementById("calendar"),n=new FullCalendar.Calendar(a,{initialView:"dayGridMonth",locale:"zh-tw",events:r});n.render()}l()});e.addEventListener("change",function(i){c.get(`${d}/roomStates?date=${e.value}`).then(function(u){if(u.data[0].availableCount.luxury<=0){o.fire(`${e.value}已無空房，請重新選擇`),e.value="",t.value="";return}})});t.addEventListener("change",function(i){if(e.value=="")return t.value="",o.firet("請先選擇入住日期");if(e.value>=t.value)return t.value="",e.value="",o.fire("退房日期需晚於入住日期");c.get(`${d}/roomStates?date_gte=${e.value}&date_lte=${t.value}&date_ne=${t.value}`).then(function(u){let r=u.data,l="";if(r.forEach(function(a){a.availableCount.luxury<=0&&(l+=`${a.date} `)}),l!==""){o.fire(`${l}已無空房，請重新選擇`),t.value="",e.value="";return}})});$.addEventListener("click",function(i){i.preventDefault(),c.get(`${d}/roomStates?date_gte=${e.value}&date_lte=${t.value}&date_ne=${t.value}`).then(function(u){if(t.value==""||e.value==""){o.fire("您尚未選擇入住或退房時間"),t.value=="",e.value=="";return}if(e.value>=t.value)return t.value=="",e.value=="",o.fire("退房日期需晚於入住日期");let r=u.data,l="";if(r.forEach(function(s){s.availableCount.luxury<=0&&(l+=`${s.date} `)}),l!==""){o.fire(`${l}已無空房，請重新選擇`),t.value="",e.value="";return}let a={};a.checkIn=e.value,a.checkOut=t.value,a.bookingDate=f,a.roomType="豪華房";let n=JSON.stringify(a);sessionStorage.setItem("bookingData",n),g("./bookingProcess_2.html")})});m("#checkinDate",{enableTime:!1,dateFormat:"Y-m-d",minDate:f,maxDate:"2024-02-29"});m("#checkoutDate",{enableTime:!1,dateFormat:"Y-m-d",minDate:f,maxDate:"2024-02-29"});let h=JSON.parse(sessionStorage.getItem("indexBooking"));e.value=h[0].checkIn;t.value=h[0].checkOut;e.setAttribute("value",e.value);t.setAttribute("value",e.value);
