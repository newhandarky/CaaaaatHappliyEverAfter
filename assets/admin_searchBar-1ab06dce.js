import{a as f,_ as g,S as r}from"./sweetalert2.all-203b6da2.js";import{h as k}from"./admin_config-2cf1d757.js";import{h as i}from"./admin_header-cdcf5a9d.js";const t=document.querySelector(".inputBookingNumber"),p=document.querySelector(".inputStartDate"),D=document.querySelector(".inputEndDate"),b=document.querySelector(".btnBookingNum"),h=document.querySelector(".btnDate");function S(){r.fire({title:"日期格式錯誤?",text:"起始日期不可與結束日期相等, 或在其之後",icon:"error"})}function u(){isNaN(Number(t.value))||Number(t.value)===0?(r.fire({title:"輸入格式錯誤",text:"請正確填寫訂單編號或輸入日期",icon:"error"}),localStorage.removeItem("bookingNum"),t.value=""):t.value!==""&&(localStorage.setItem("bookingNum",t.value),location="admin_updateBooking.html")}const y=f.get(`${g}/660/bookings?_expand=user&_expand=room`,k);h.addEventListener("click",function(){let e=i(p.value),s=i(D.value),c=s.diff(e,"days");c<=0&&S(),Promise.all([y]).then(function(o){const m=o[0].data;let n=[];for(let a=0;a<=c;a++){const d=i(e).add(a,"day").format("YYYY-MM-DD");m.forEach(function(l){l.checkIn===d&&n.push(l)})}n.length!==0?(localStorage.setItem("h2Content",`住房日期 <span class="text-primary">${e.format("YYYY-MM-DD")}</span> 到 <span class="text-primary">${s.format("YYYY-MM-DD")}</span> 的搜尋結果`),localStorage.setItem("searchResult",JSON.stringify(n)),location="admin_bookingSearch.html"):r.fire({title:"所查詢的日期無住房資料",text:"請確認輸入的日期是否正確",icon:"question"})}).catch(function(o){reLogin(o.response.data)})});b.addEventListener("click",function(){u()});t.addEventListener("keydown",function(e){e.keyCode===13&&u()});
