import{S as m}from"./sweetalert2.all-1988d671.js";import{i}from"./navbar-bd5379fb.js";import"./aside-7286c9e4.js";import{a as y,_ as D}from"./config-4096d6dc.js";import{f as b}from"./index-a4e39586.js";const p=document.querySelectorAll("#catData");p.forEach(t=>{t.classList.add("onThisPage")});const I=document.querySelector("#navAside");I.classList.remove("d-none");b("#catBirthday",{enableTime:!1,dateFormat:"Y-m-d"});const v=document.querySelector("#loading");v.classList.toggle("d-none");const E=JSON.parse(localStorage.getItem("userTokenAndData")),{accessToken:A,user:S}=E,w=document.getElementById("addCatFrom"),r=document.getElementById("cancelAdd"),L=document.getElementById("myCatFile"),c={};function C(t){y.post(`${D}/cats`,t,{headers:{authorization:`Bearer ${A}`}}).then(e=>{console.log(e),m.mixin({customClass:{confirmButton:"btn btn-custom-confirm",cancelButton:"btn btn-custom-cancel"},buttonsStyling:!1}).fire({title:"新增貓咪成功",icon:"success",confirmButtonText:"確定"}).then(a=>{window.location.href="./catData.html"})}).catch(e=>{console.log(e),m.mixin({customClass:{confirmButton:"btn btn-custom-confirm",cancelButton:"btn btn-custom-cancel"},buttonsStyling:!1}).fire({title:"新增貓咪失敗",text:"請重新登入後再嘗試",confirmButtonText:"確定"}).then(a=>{window.location.href="./login.html"})})}w.addEventListener("submit",t=>{t.preventDefault(),document.querySelector("#catAdd").classList.toggle("d-none"),document.querySelector("#loading").classList.toggle("d-none"),i();const a=document.getElementById("catName"),n=document.getElementById("catMale"),s=document.getElementById("catFemale"),l=document.getElementById("catOther"),u=document.getElementById("catBirthday"),g=document.getElementById("catBreeds"),h=document.getElementById("catColors"),B=document.getElementById("catWeight");let f=()=>n.checked?n.value:s.checked?s.value:l.checked?l.value:"Not Specified";console.dir(n);let d={catName:a.value,catBreeds:g.value,colors:h.value,gender:f(),birthday:u.value,weight:B.value,catPhoto:c.base64Image||"https://i.imgur.com/slCGtuf.png",userId:S.id};console.log(d),C(d)});r.addEventListener("click",t=>{t.preventDefault();const e=r.getAttribute("href");i(e)});L.addEventListener("change",t=>{const e=t.target.files[0],o=new FileReader;o.onload=a=>{const n=a.target.result;c.base64Image=n,c.fileName=e.name;const s=document.getElementById("catPhoto");s.src=c.base64Image},o.readAsDataURL(e),console.log(c)});
